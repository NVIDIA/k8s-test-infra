# Mock NVML Configuration: B200
# Full configuration for nvidia-smi -x -q compatibility
# Use: export MOCK_NVML_CONFIG=/path/to/this/file.yaml

version: "1.0"

# =============================================================================
# System-level configuration
# =============================================================================
system:
  driver_version: "560.35.03"
  nvml_version: "12.560.35.03"
  cuda_version: "12.6"
  cuda_version_major: 12
  cuda_version_minor: 6

# =============================================================================
# Default device configuration (applied to all devices unless overridden)
# =============================================================================
device_defaults:
  # ---------------------------------------------------------------------------
  # Basic identification
  # ---------------------------------------------------------------------------
  name: "NVIDIA B200"
  brand: "nvidia"
  serial: "1562849203750"
  board_part_number: "699-2G540-0200-000"
  vbios_version: "96.00.A0.00.01"

  # ---------------------------------------------------------------------------
  # Architecture
  # ---------------------------------------------------------------------------
  architecture: "blackwell"
  compute_capability:
    major: 10
    minor: 0
  num_gpu_cores: 18432              # CUDA cores

  # ---------------------------------------------------------------------------
  # InfoROM versions
  # ---------------------------------------------------------------------------
  inforom:
    image_version: "B200.0200.00.01"
    oem_object: "2.1"
    ecc_object: "7.16"
    pwr_object: "1.0"

  # ---------------------------------------------------------------------------
  # Memory configuration - 192 GiB HBM3e
  # ---------------------------------------------------------------------------
  memory:
    total_bytes: 206158430208       # 192 GiB HBM3e
    reserved_bytes: 1073741824      # ~1 GiB reserved
    free_bytes: 205084688384        # total - reserved at idle
    used_bytes: 0

  bar1_memory:
    total_bytes: 274877906944       # 256 GiB (standalone B200, not 512 GiB like GB200)
    free_bytes: 274877906944
    used_bytes: 0

  # ---------------------------------------------------------------------------
  # PCI configuration
  # ---------------------------------------------------------------------------
  pci:
    device_id: 0x234010DE           # B200 standalone
    subsystem_id: 0x181810DE

  pcie:
    max_link_gen: 6                 # PCIe Gen6
    current_link_gen: 6
    max_link_width: 16              # x16
    current_link_width: 16
    replay_counter: 0
    tx_throughput_kbps: 0
    rx_throughput_kbps: 0

  # ---------------------------------------------------------------------------
  # Power configuration - 1000W TDP
  # ---------------------------------------------------------------------------
  power:
    management_supported: true
    management_mode: "enabled"
    default_limit_mw: 1000000       # 1000W
    enforced_limit_mw: 1000000
    min_limit_mw: 400000            # 400W minimum
    max_limit_mw: 1200000           # 1200W max
    current_draw_mw: 130000         # 130W idle
    power_state: "P0"

  # ---------------------------------------------------------------------------
  # Thermal configuration
  # ---------------------------------------------------------------------------
  thermal:
    temperature_gpu_c: 35           # Idle temperature
    temperature_memory_c: 33
    shutdown_threshold_c: 95
    slowdown_threshold_c: 90
    max_operating_c: 85
    target_temperature_c: 85

  # ---------------------------------------------------------------------------
  # Fan configuration (N/A - liquid cooled)
  # ---------------------------------------------------------------------------
  fan:
    count: 0                        # Liquid cooled, no fans
    speed_percent: "N/A"
    target_speed_percent: "N/A"

  # ---------------------------------------------------------------------------
  # Clock speeds (MHz) - Blackwell
  # ---------------------------------------------------------------------------
  clocks:
    graphics_current: 345           # Idle
    graphics_max: 2100
    graphics_app: 2100
    graphics_app_default: 2100
    sm_current: 345
    sm_max: 2100
    memory_current: 2500            # HBM3e
    memory_max: 2500
    memory_app: 2500
    memory_app_default: 2500
    video_current: 1200
    video_max: 2100

  # ---------------------------------------------------------------------------
  # Clocks throttle reasons
  # ---------------------------------------------------------------------------
  clocks_throttle_reasons:
    gpu_idle: true
    applications_clocks_setting: false
    sw_power_cap: false
    hw_slowdown: false
    hw_thermal_slowdown: false
    hw_power_brake_slowdown: false
    sync_boost: false
    sw_thermal_slowdown: false
    display_clocks_setting: false

  # ---------------------------------------------------------------------------
  # Supported clocks
  # ---------------------------------------------------------------------------
  supported_clocks:
    memory_clocks:
      - freq_mhz: 2500
        graphics_clocks: [345, 690, 1035, 1380, 1725, 1890, 2100]

  # ---------------------------------------------------------------------------
  # Performance state
  # ---------------------------------------------------------------------------
  performance_state: "P0"

  # ---------------------------------------------------------------------------
  # Utilization (percentage, 0-100)
  # ---------------------------------------------------------------------------
  utilization:
    gpu: 0
    memory: 0
    encoder: 0
    decoder: 0
    jpeg: 0
    ofa: 0

  # ---------------------------------------------------------------------------
  # Encoder/Decoder statistics
  # ---------------------------------------------------------------------------
  encoder_stats:
    session_count: 0
    average_fps: 0
    average_latency_us: 0

  fbc_stats:
    session_count: 0
    average_fps: 0
    average_latency_us: 0

  # ---------------------------------------------------------------------------
  # ECC configuration
  # ---------------------------------------------------------------------------
  ecc:
    mode_current: "enabled"
    mode_pending: "enabled"
    default_mode: "enabled"
    errors:
      volatile:
        single_bit:
          device_memory: 0
          l1_cache: 0
          l2_cache: 0
          register_file: 0
          texture_memory: 0
          total: 0
        double_bit:
          device_memory: 0
          l1_cache: 0
          l2_cache: 0
          register_file: 0
          texture_memory: 0
          total: 0
      aggregate:
        single_bit:
          device_memory: 0
          l1_cache: 0
          l2_cache: 0
          register_file: 0
          texture_memory: 0
          total: 0
        double_bit:
          device_memory: 0
          l1_cache: 0
          l2_cache: 0
          register_file: 0
          texture_memory: 0
          total: 0

  # ---------------------------------------------------------------------------
  # Retired pages
  # ---------------------------------------------------------------------------
  retired_pages:
    single_bit_retirement:
      count: 0
      addresses: []
    double_bit_retirement:
      count: 0
      addresses: []
    pending_blacklist: false
    pending_retirement: false

  # ---------------------------------------------------------------------------
  # Remapped rows
  # ---------------------------------------------------------------------------
  remapped_rows:
    correctable: 0
    uncorrectable: 0
    pending: false
    failure_occurred: false

  # ---------------------------------------------------------------------------
  # Display configuration
  # ---------------------------------------------------------------------------
  display:
    mode: "disabled"
    active: "disabled"

  # ---------------------------------------------------------------------------
  # Persistence mode
  # ---------------------------------------------------------------------------
  persistence_mode: "enabled"

  # ---------------------------------------------------------------------------
  # Compute mode
  # ---------------------------------------------------------------------------
  compute_mode: "default"

  # ---------------------------------------------------------------------------
  # MIG configuration
  # ---------------------------------------------------------------------------
  mig:
    mode_current: "disabled"
    mode_pending: "disabled"
    max_gpu_instances: 7

  # ---------------------------------------------------------------------------
  # GPU operation mode (GOM)
  # ---------------------------------------------------------------------------
  gpu_operation_mode:
    current: "all_on"
    pending: "all_on"

  # ---------------------------------------------------------------------------
  # Driver model (Windows only)
  # ---------------------------------------------------------------------------
  driver_model:
    current: "N/A"
    pending: "N/A"

  # ---------------------------------------------------------------------------
  # Accounting mode
  # ---------------------------------------------------------------------------
  accounting:
    mode: "disabled"
    buffer_size: 4000

  # ---------------------------------------------------------------------------
  # Virtualization
  # ---------------------------------------------------------------------------
  virtualization:
    mode: "none"
    host_vgpu_mode: "N/A"

  # ---------------------------------------------------------------------------
  # GSP Firmware
  # ---------------------------------------------------------------------------
  gsp_firmware:
    mode: "enabled"
    version: "560.35.03"

  # ---------------------------------------------------------------------------
  # Blackwell-specific features (standalone B200 - no NVLink-C2C)
  # ---------------------------------------------------------------------------
  features:
    transformer_engine: true
    fp4_support: true
    fp8_support: true
    confidential_compute: true
    decompression_engine: true
    fifth_gen_tensor_cores: true

  # ---------------------------------------------------------------------------
  # Processes (empty at idle)
  # ---------------------------------------------------------------------------
  processes: []

# =============================================================================
# Device-specific overrides (indexed 0-7 for B200)
# =============================================================================
devices:
  - index: 0
    uuid: "GPU-B200-0000-0000-0000-000000000000"
    serial: "1562849203700"
    pci:
      bus_id: "00000000:1A:00.0"
    minor_number: 0

  - index: 1
    uuid: "GPU-B200-0000-0000-0000-000000000001"
    serial: "1562849203701"
    pci:
      bus_id: "00000000:1B:00.0"
    minor_number: 1

  - index: 2
    uuid: "GPU-B200-0000-0000-0000-000000000002"
    serial: "1562849203702"
    pci:
      bus_id: "00000000:4A:00.0"
    minor_number: 2

  - index: 3
    uuid: "GPU-B200-0000-0000-0000-000000000003"
    serial: "1562849203703"
    pci:
      bus_id: "00000000:4B:00.0"
    minor_number: 3

  - index: 4
    uuid: "GPU-B200-0000-0000-0000-000000000004"
    serial: "1562849203704"
    pci:
      bus_id: "00000000:8A:00.0"
    minor_number: 4

  - index: 5
    uuid: "GPU-B200-0000-0000-0000-000000000005"
    serial: "1562849203705"
    pci:
      bus_id: "00000000:8B:00.0"
    minor_number: 5

  - index: 6
    uuid: "GPU-B200-0000-0000-0000-000000000006"
    serial: "1562849203706"
    pci:
      bus_id: "00000000:CA:00.0"
    minor_number: 6

  - index: 7
    uuid: "GPU-B200-0000-0000-0000-000000000007"
    serial: "1562849203707"
    pci:
      bus_id: "00000000:CB:00.0"
    minor_number: 7

# =============================================================================
# NVLink topology - B200 NVLink 5 (GPU-to-GPU only, no C2C)
# =============================================================================
nvlink:
  version: 5
  links_per_gpu: 18
  bandwidth_per_link_gbps: 100      # 100 GB/s per link = 1.8 TB/s total per GPU
  links:
    - link: 0
      state: "active"
      remote_device_type: "gpu"
      remote_pci_bus_id: "00000000:1B:00.0"
